name: 'ğŸ› Bug Report'
description: Report a bug with the template or generated projects
labels: [bug, needs-triage]
title: '[Bug] '

# Label Mapping Documentation for GitHub Actions:
# 
# Scope mapping (based on issue_scope field):
# - "Template (generation, hooks, template scripts)" â†’ scope:template
# - "Generated Project (nox, dependencies, tooling)" â†’ scope:generated
#
# Component mapping (based on issue_category field):
# - "Template - Nox commands" â†’ component:nox
# - "Template - Post-generation hooks" â†’ component:hooks
# - "*Rust extension*" â†’ rust
# - "*CI/CD*" â†’ component:ci
# - "*Container/Docker*" â†’ component:container
# - "*Documentation*" â†’ documentation (remove from primary)
# - "*Testing*" â†’ component:testing
# - "*Security*" â†’ component:security
# - "*Dependency*" â†’ dependencies (add as primary)
#
# Priority mapping (based on severity field):
# - "Critical (blocks all usage)" â†’ priority:critical
# - "High (blocks major functionality)" â†’ priority:high  
# - "Medium (workaround available)" â†’ priority:medium
# - "Low (minor inconvenience)" â†’ priority:low
#
# Environment mapping (when relevant):
# - python_version: "3.9" â†’ python:3.9, etc.
# - os: "macOS*" â†’ os:macos, "Linux*" â†’ os:linux, "Windows*" â†’ os:windows, "WSL*" â†’ os:wsl
#
# Feature flags:
# - rust_extension: "Yes" â†’ rust

body:
  - type: markdown
    attributes:
      value: |
        ## Bug Report
        
        Report issues with either the cookiecutter template or generated projects.

  - type: dropdown
    id: issue_scope
    attributes:
      label: ğŸ¯ Issue Scope
      description: Is this a template issue or generated project issue?
      options:
        - Template (generation, hooks, template scripts)
        - Generated Project (nox, dependencies, tooling)
    validations:
      required: true

  - type: textarea
    id: description
    attributes:
      label: ğŸ“ Bug Description
      description: Clearly describe what went wrong
      placeholder: |
        A clear and concise description of the bug...
    validations:
      required: true

  - type: dropdown
    id: issue_category
    attributes:
      label: ğŸ·ï¸ Issue Category
      description: Select the category that best describes the issue
      options:
        # Template-specific options
        - Template - Cookiecutter prompts/input
        - Template - File generation
        - Template - Post-generation hooks
        - Template - Nox commands (generate-demo, lint, test)
        - Template - Documentation/structure
        # Generated project options
        - Generated - Nox session failures
        - Generated - Dependency/package management
        - Generated - Build/packaging problems
        - Generated - Testing framework issues
        - Generated - Documentation build issues
        - Generated - Linting/formatting configuration
        - Generated - Type checking issues
        - Generated - Security scanning problems
        - Generated - CI/CD workflow issues
        - Generated - Rust extension issues
        - Generated - Container/Docker issues
        - Generated - Project structure/files
        - Other
    validations:
      required: true

  - type: textarea
    id: reproduction
    attributes:
      label: ğŸ”„ Steps to Reproduce
      description: Provide clear steps to reproduce the issue
      value: |
        1. 
        2. 
        3. 
    validations:
      required: true

  - type: textarea
    id: expected_behavior
    attributes:
      label: âœ… Expected Behavior
      description: What did you expect to happen?
    validations:
      required: true

  - type: textarea
    id: actual_behavior
    attributes:
      label: âŒ Actual Behavior
      description: What actually happened?
    validations:
      required: true

  - type: textarea
    id: cookiecutter_config
    attributes:
      label: âš™ï¸ Cookiecutter Configuration
      description: Paste your .cookiecutter.json file contents or the options you selected
      render: json
      placeholder: |
        {
          "project_name": "my-project",
          "add_rust_extension": "no",
          ...
        }
    validations:
      required: false

  - type: dropdown
    id: rust_extension
    attributes:
      label: ğŸ¦€ Rust Extension
      description: Does your project include Rust extensions?
      options:
        - "No"
        - "Yes"
        - "N/A - Template issue"
    validations:
      required: true

  - type: dropdown
    id: python_version
    attributes:
      label: ğŸ Python Version
      description: Which Python version are you using?
      options:
        - "3.9"
        - "3.10"
        - "3.11"
        - "3.12"
        - "3.13"
        - "Other (specify in environment)"
    validations:
      required: true

  - type: dropdown
    id: os
    attributes:
      label: ğŸ’» Operating System
      description: Which OS are you using?
      options:
        - macOS (Intel)
        - macOS (Apple Silicon)
        - Linux (Ubuntu/Debian)
        - Linux (Fedora/RHEL)
        - Linux (Arch)
        - Linux (Other)
        - Windows 10
        - Windows 11
        - WSL2
        - Other
    validations:
      required: true

  - type: textarea
    id: environment
    attributes:
      label: ğŸ–¥ï¸ Environment Details
      description: Additional environment information
      value: |
        - uv version: 
        - nox version: 
        - Cookiecutter version: 
        - Template version/commit: 
        - Other relevant tools: 
    validations:
      required: true

  - type: textarea
    id: error_output
    attributes:
      label: ğŸš¨ Error Output
      description: Paste the complete error message, stack trace, or command output
      render: shell
      placeholder: |
        Paste full error output here...
    validations:
      required: false

  - type: textarea
    id: workaround
    attributes:
      label: ğŸ”§ Workaround
      description: If you found a temporary solution, please describe it
      placeholder: |
        Describe any workaround you discovered...
    validations:
      required: false

  - type: dropdown
    id: severity
    attributes:
      label: âš¡ Severity
      description: How severe is this issue?
      options:
        - Critical (blocks all usage)
        - High (blocks major functionality)
        - Medium (workaround available)
        - Low (minor inconvenience)
    validations:
      required: true